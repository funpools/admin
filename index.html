<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  <title>Fun Pools Admin</title>
  <link rel="shortcut icon" href="favicon.ico" />
  <link rel="stylesheet" href="framework7.bundle.css">
  <link rel="stylesheet" href="main.css">
</head>

<body>
  <div id="splash-screen">
    <img src="logo.png" width="150px" />
    <div class="preloader" style="margin-top: 32px">
      <span class="preloader-inner">
        <span class="preloader-inner-circle"></span>
      </span>
    </div>
  </div>
  <div id="app">
    <div class="panel panel-left">
      <div class="block">
        <h3 id="username" style="text-align: center"></h3>
        <div class="list no-hairlines">
          <ul>
            <li><a href="#tab-1" class="tab-link tab-link-active">Reports</a></li>
            <li><a href="#tab-2" class="tab-link">Users</a></li>
            <li><a href="#tab-3" class="tab-link">Pools</a></li>
            <!--  <li><a onclick="loadTags()" href="#tab-4" class="tab-link">Tags</a></li>
            <li><a href="#tab-5" class="tab-link">Change Password</a></li> -->
            <li><a href="#" onclick="forgotPassword()" class="tab-link">Reset Password</a></li>
          </ul>
        </div>
        <a href="#" class="button button-fill" onclick="signOut()">Logout</a>
      </div>
    </div>
    <div class="view view-main">
      <div data-name="home" class="page">
        <div class="page-content">
          <div class="tabs">
            <div id="tab-1" class="tab tab-active">
              <div class="block-card">
                <h3 class="title no-margin-top">Analytics</h3>
                <!-- TODO: add analytics -->
                Coming Soon!<br>Current analytics can be found <a href="https://console.firebase.google.com" target="_blank" class="link external">here</a>.
              </div>
              <div class="block-card">
                <h3 class="title no-margin-top">Reported Issues</h3>
                <div class="list media-list no-hairlines">
                  <ul id="issue"></ul>
                </div>
                <div class="list media-list no-hairlines skeleton-text skeleton-effect-blink skeleton-feedback">
                  <ul>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longer</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longerrrrr</div>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="block-card">
                <h3 class="title no-margin-top">Feature Requests</h3>
                <div class="list media-list no-hairlines">
                  <ul id="feature"></ul>
                </div>
                <div class="list media-list no-hairlines skeleton-text skeleton-effect-blink skeleton-feedback">
                  <ul>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longer</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longerrrrr</div>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="block-card">
                <h3 class="title no-margin-top">General Feedback</h3>
                <div class="list media-list no-hairlines">
                  <ul id="feedback"></ul>
                </div>
                <div class="list media-list no-hairlines skeleton-text skeleton-effect-blink skeleton-feedback">
                  <ul>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longer</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longerrrrr</div>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="block-card">
                <h3 class="title no-margin-top">Account Deletion Requests</h3>
                <div class="list media-list no-hairlines">
                  <ul id="delete-account"></ul>
                </div>
                <div class="list media-list no-hairlines skeleton-text skeleton-effect-blink skeleton-feedback">
                  <ul>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longer</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longerrrrr</div>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="block-card">
                <h3 class="title no-margin-top">Resolved Feedback</h3>
                <div class="list media-list no-hairlines">
                  <ul id="resolved"></ul>
                </div>
                <div class="list media-list no-hairlines skeleton-text skeleton-effect-blink skeleton-feedback">
                  <ul>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longer</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is datethis is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be</div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">this is title</div>
                            <div class="item-after">this is date!!!!!!!</div>
                          </div>
                          <div class="item-text">this is subject and should be longerrrrr</div>
                        </div>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div id="tab-2" class="tab">
              <div class="block-card">
                <h3 class="title no-margin-top">All Users</h3>
                <div class="searchbar-backdrop"></div>
                <form class="searchbar searchbar-init no-hairline" style="background-color: white">
                  <div class="searchbar-inner" style="border: 1px solid var(--f7-list-item-border-color)">
                    <div class="searchbar-input-wrap">
                      <input id="user-search" type="search" placeholder="Search">
                      <i class="searchbar-icon"></i>
                    </div>
                    <span id="user-search-button" onclick="searchUsers()" class="searchbar-disable-button">Search</span>
                  </div>
                </form>
                <div class="list media-list no-hairlines">
                  <ul id="all-users-list">
                  </ul>
                  <div class="display-flex justify-content-center">
                    <div class="preloader search-user-preloader" style="display: none;">
                      <span class="preloader-inner">
                        <span class="preloader-inner-circle"></span>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="block-card">
                <h3 class="title no-margin-top">Banned Users</h3>
                <div class="searchbar-backdrop"></div>
                <form class="searchbar searchbar-init no-hairline" style="background-color: white" data-search-in=".item-title" data-search-container="#banned-users-list">
                  <div class="searchbar-inner" style="border: 1px solid var(--f7-list-item-border-color)">
                    <div class="searchbar-input-wrap">
                      <input type="search" placeholder="Search">
                      <i class="searchbar-icon"></i>
                    </div>
                    <span class="searchbar-disable-button">Cancel</span>
                  </div>
                </form>
                <div class="list search-list searchbar-found no-hairlines">
                  <ul id="banned-users-list">
                    <!--<li>
                      <a href="#" class="item-link item-content">
                        <div class="item-media"><img src="https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fclipart-library.com%2Fimages%2FATbrxjpyc.jpg&f=1&nofb=1" width="32px" style="border-radius: 50%" /></div>
                        <div class="item-inner">
                          <div>
                            <div class="item-title">Ivan Petrov</div>
                            <div class="item-description"><strong>Reason for ban:</strong> user posted too many photos of his cat.</div>
                          </div>
                          <div class="item-after"><button class="button">Lift Ban</button></div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-media"><img src="https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fclipart-library.com%2Fimages%2FATbrxjpyc.jpg&f=1&nofb=1" width="32px" style="border-radius: 50%" /></div>
                        <div class="item-inner">
                          <div>
                            <div class="item-title">Kanye West</div>
                            <div class="item-description"><strong>Reason for ban:</strong> user posted too many photos of his cat.</div>
                          </div>
                          <div class="item-after"><button class="button">Lift Ban</button></div>
                        </div>
                      </a>
                    </li>
                    <li>
                      <a href="#" class="item-link item-content">
                        <div class="item-media"><img src="https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fclipart-library.com%2Fimages%2FATbrxjpyc.jpg&f=1&nofb=1" width="32px" style="border-radius: 50%" /></div>
                        <div class="item-inner">
                          <div>
                            <div class="item-title">Ivan Petrov</div>
                            <div class="item-description"><strong>Reason for ban:</strong> user posted too many photos of his cat.</div>
                          </div>
                          <div class="item-after"><button class="button">Lift Ban</button></div>
                        </div>
                      </a>
                    </li>-->
                  </ul>
                </div>
                <div class="block searchbar-not-found">
                  <div class="block-inner">Nothing found</div>
                </div>
              </div>
            </div>
            <div id="tab-3" class="tab">
              <div class="block">
                <button class="button button-fill" onclick="newPool()" style="width: 50%; margin: 16px auto">New Pool</button>


                <ul>
                  <div class="accordion-item">
                    <div class="accordion-item-toggle">
                      <i class="icon icon-plus">+</i>
                      <i class="icon icon-minus">-</i>
                      <span>Item 1</span>
                    </div>
                    <div class="accordion-item-content">
                      <p>Item 1 content. Lorem ipsum dolor sit amet...</p>
                    </div>
                  </div>
                  <!-- Active pools accordion -->
                  <li class="accordion-item accordion-item-opened no-margin-top">
                    <a href="#" class="item-content item-link">
                      <div class="item-inner">
                        <div class="item-title" style="color:green;">Active</div>
                      </div>
                    </a>
                    <div class="accordion-item-content">
                      <div id="active-pools" class="row justify-content-flex-start">

                      </div>
                    </div>
                  </li>
                  <!-- Open pools accordion -->
                  <li class="accordion-item accordion-item-opened no-margin-top">
                    <a href="#" class="item-content item-link">
                      <div class="item-inner">
                        <div class="item-title" style="color:green;">Open</div>
                      </div>
                    </a>
                    <div class="accordion-item-content">
                      <div id="open-pools" class="row justify-content-flex-start">

                      </div>
                    </div>
                  </li>
                  <!-- Draft pools accordion -->
                  <li class="accordion-item accordion-item-opened no-margin-top">
                    <a href="#" class="item-content item-link">
                      <div class="item-inner">
                        <div class="item-title" style="color:green;">Drafts</div>
                      </div>
                    </a>
                    <div class="accordion-item-content">
                      <div id="draft-pools" class="row justify-content-flex-start">

                      </div>
                    </div>
                  </li>
                  <!-- Closed pools accordion -->
                  <li class="accordion-item accordion-item-opened no-margin-top">
                    <a href="#" class="item-content item-link">
                      <div class="item-inner">
                        <div class="item-title" style="color:green;">Closed</div>
                      </div>
                    </a>
                    <div class="accordion-item-content">
                      <div id="closed-pools" class="row justify-content-flex-start">

                      </div>
                    </div>
                  </li>

                </ul>


                <div id="pool-list" class="row justify-content-flex-start">
                </div>
              </div>
            </div>
            <div id="tab-4" class="tab">
              <a href="#" onclick="newTag()" class="button button-fill" style="width: 50%; margin: 16px auto">New Tag</a>

              <div class="block-card">
                <div class="list no-hairlines no-margin">
                  <ul>
                    <li class="accordion-item accordion-item-opened no-margin-top"><a href="#" class="item-content item-link">
                        <div class="item-inner">
                          <div class="item-title">Favorite Sports</div>
                        </div>
                      </a>
                      <div class="accordion-item-content">
                        <div id="type-sport">
                        </div>
                      </div>
                    </li>
                    <li class="accordion-item no-margin-bottom"><a href="#" class="item-content item-link">
                        <div class="item-inner">
                          <div class="item-title">Favorite Teams</div>
                        </div>
                      </a>
                      <div class="accordion-item-content">
                        <div id="type-team">
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div id="tab-5" class="tab">
              <div class="block-card">
                <a href="#" onclick="forgotPassword()" class="button">Reset Your Password</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="popup pool-popup">
    <div class="block">
      <label id="pool-pic">
        <div class="pic-upload">
          <input class="pic-input" type="file" accept="image/jpeg, image/png" onchange="previewPic(event, '#pool-pic')" />
          <i class="material-icons pic-icon" style="font-size: 50px">add_photo_alternate</i>
        </div>
      </label>
      <div class="list inset">
        <ul>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">Pool Name</div>
              <div class="item-input-wrap">
                <input id="pool-name" type="text" placeholder="Pool name" data-id="0">
                <span class="input-clear-button"></span>
              </div>
            </div>
          </li>
          <div class="text-editor text-editor-init text-editor-resizable" data-placeholder="Pool description">
            <div id="pool-description" class="text-editor-content" contenteditable></div>
          </div>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">Local Date & Time</div>
              <div class="item-input-wrap">
                <input type="text" placeholder="Select date and time" readonly="readonly" id="pool-date-input" />
              </div>
            </div>
          </li>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">Visibility</div>
              <div class="item-input-wrap input-dropdown-wrap">
                <select id="pool-visibility">
                  <option value="draft">Draft</option>
                  <option value="open">Open</option>
                  <option value="active">Active - Game in Progress</option>
                  <option value="closed">Closed</option>
                </select>
              </div>
            </div>
          </li>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">Pool Tags</div>
              <div class="item-input-wrap">
                <input type="text" placeholder="Enter tags separated by a comma." onkeypress="addTag(this)">
              </div>
            </div>
          </li>
          <div class="block" id="pool-tags" style="padding-bottom: 16px">
          </div>
        </ul>
      </div>

      <div class="block">
        <div id="pool-questions">
        </div>
        <div class="row">
          <div class="col">
            <button id="mc-question" class="button">+ Multiple Choice Question</button>
          </div>
          <div class="col">
            <button id="n-question" class="button">+ Numeric Question</button>
          </div>
        </div>
      </div>

      <div class="row justify-content-space-around">
        <div class="col">
          <button class="button button-fill popup-close">Cancel</button>
        </div>
        <div class="col">
          <button class="button button-fill pool-save">Save</button>
        </div>

      </div>
    </div>
  </div>

  <div class="popup tag-popup" style="height: 400px; width: 400px; margin: -200px; ">
    <div class="block">
      <label id="tag-pic">
        <div class="pic-upload">
          <input class="pic-input" type="file" accept="image/jpeg, image/png" onchange="previewPic(event, '#tag-pic')" />
          <i class="material-icons pic-icon" style="font-size: 50px">add_photo_alternate</i>
        </div>
      </label>
      <div class="list inset">
        <ul>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">Tag Name</div>
              <div class="item-input-wrap">
                <input id="tag-name" type="text" placeholder="Tag name">
                <span class="input-clear-button"></span>
              </div>
            </div>
          </li>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-title item-label">Tag Type</div>
              <div class="item-input-wrap input-dropdown-wrap">
                <select id="tag-type" placeholder="Please choose...">
                  <option value="sport">Favorite Sports</option>
                  <option value="team">Favorite Teams</option>
                </select>
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div class="row justify-content-space-around">
        <div class="col">
          <button class="button button-fill popup-close">Cancel</button>
        </div>
        <div class="col">
          <button class="button button-fill tag-save">Save</button>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="framework7.bundle.js"></script>
  <script type="text/javascript" src="main.js"></script>
  <script type="text/javascript" src="js/user.js"></script>

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="js/firebase/firebase-app.js"></script>
  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="js/firebase/firebase-analytics.js"></script>
  <!-- Add Firebase products that you want to use -->
  <script src="js/firebase/firebase-auth.js"></script>
  <script src="js/firebase/firebase-firestore.js"></script>
  <script src="js/firebase/firebase-storage.js"></script>
  <script src="js/firebase/firebase-database.js"></script>


  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyDE4eEbTl4-2uRZhPotGSVMxgj6nVEhqjw",
      authDomain: "fun-sports-pools.firebaseapp.com",
      databaseURL: "https://fun-sports-pools.firebaseio.com",
      projectId: "fun-sports-pools",
      storageBucket: "fun-sports-pools.appspot.com",
      messagingSenderId: "825861071194",
      appId: "1:825861071194:web:eb3544cbf38bd07331d363",
      measurementId: "G-5LMHL36YSF"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    //Get refs for media storage
    var storage = firebase.storage();
    var storageRef = storage.ref();

    //reference to the firestore database
    var db = firebase.firestore();

    var User; //An objects that contins the user data if the currently signed in user
    var uid; //This is the users id

    //Firebase authentication
    firebase.auth().onAuthStateChanged(function(user) { //This function runs every time the users authentication state changes (eg. the user signs in or out)

      //If the user is signed in
      if (user) {
        uid = user.uid;
        setupMainPage();
      } else { //User is signed out.
        console.log("Nobody is signed in");

        //hide left panel
        app.panel.destroy('.panel-left');

        //hide splash screen
        $$('#splash-screen').hide();

        //show login page
        self.app.views.main.router.navigate('/login/', {
          ignoreCache: true,
        });
      }
    });
  </script>
</body>

</html>